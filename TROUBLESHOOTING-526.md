# –†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 526 –¥–ª—è testpage.technobar.by

## üîç –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Ä–µ–∂–∏–º –≤ Cloudflare (–ì–õ–ê–í–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê!)

1. –ó–∞–π–¥–∏—Ç–µ –≤ **Cloudflare Dashboard**: https://dash.cloudflare.com
2. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–µ–Ω **technobar.by**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SSL/TLS** ‚Üí **Overview**
4. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ "Full" –∏–ª–∏ "Full (strict)"**

   ‚ùå **"Flexible"** - –ù–ï –ü–û–î–•–û–î–ò–¢! Cloudflare –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ HTTP, –∞ –Ω–µ HTTPS
   ‚úÖ **"Full"** - Cloudflare –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ HTTPS, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
   ‚úÖ **"Full (strict)"** - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è! Cloudflare –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ HTTPS –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

5. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –∑–∞–ø–∏—Å—å –¥–ª—è testpage.technobar.by

1. –í Cloudflare Dashboard –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **DNS** ‚Üí **Records**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å—å –¥–ª—è `testpage.technobar.by`:
   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ **A-–∑–∞–ø–∏—Å—å**:
     - **Name**: `testpage`
     - **IPv4 address**: IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
     - **Proxy status**: **Proxied** (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞—á–∫–æ) ‚úÖ
     - **TTL**: Auto
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **wildcard –∑–∞–ø–∏—Å—å** `*.technobar.by`:
   - **Name**: `*`
   - **IPv4 address**: IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   - **Proxy status**: **Proxied** (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞—á–∫–æ) ‚úÖ

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —è–≤–ª—è–µ—Ç—Å—è wildcard
docker exec bartech-nginx openssl x509 -in /etc/letsencrypt/live/technobar.by/cert.pem -noout -text | grep -A 2 "Subject Alternative Name"

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# DNS:*.technobar.by, DNS:technobar.by
```

–ï—Å–ª–∏ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ volumes (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã)
docker volume create cvirko-vadim_certbot-etc
docker volume create cvirko-vadim_certbot-var

# –°–æ–∑–¥–∞–π—Ç–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
make init-certs
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ SSL
docker logs bartech-nginx --tail 100 | grep -i ssl
docker logs bartech-nginx --tail 100 | grep -i error

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ nginx –∑–∞–ø—É—â–µ–Ω
docker-compose ps
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é

```bash
# –° –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
openssl s_client -connect testpage.technobar.by:443 -servername testpage.technobar.by

# –ò–ª–∏ —Å –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_SERVER_IP –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
curl -v https://testpage.technobar.by --resolve testpage.technobar.by:443:YOUR_SERVER_IP
```

### –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
docker-compose restart nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker exec bartech-nginx nginx -t
```

## üéØ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ Cloudflare Proxy

1. –í Cloudflare Dashboard ‚Üí **DNS** ‚Üí **Records**
2. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å –¥–ª—è `testpage` –∏–ª–∏ `*`
3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ **Proxy status** —Å **Proxied** –Ω–∞ **DNS only** (—Å–µ—Ä–æ–µ –æ–±–ª–∞—á–∫–æ)
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ https://testpage.technobar.by –Ω–∞–ø—Ä—è–º—É—é

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Cloudflare (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ SSL —Ä–µ–∂–∏–º).

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

1. **SSL Labs**: https://www.ssllabs.com/ssltest/
   - –í–≤–µ–¥–∏—Ç–µ `testpage.technobar.by`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ü–µ–Ω–∫—É SSL

2. **Cloudflare SSL/TLS Analyzer**:
   - –í Cloudflare Dashboard ‚Üí **SSL/TLS** ‚Üí **Edge Certificates**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] SSL —Ä–µ–∂–∏–º –≤ Cloudflare —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ **"Full"** –∏–ª–∏ **"Full (strict)"**
- [ ] DNS –∑–∞–ø–∏—Å—å –¥–ª—è `testpage.technobar.by` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ **Proxied**
- [ ] Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç `*.technobar.by` —Å–æ–∑–¥–∞–Ω –∏ –≤–∞–ª–∏–¥–µ–Ω
- [ ] Nginx –∑–∞–ø—É—â–µ–Ω –∏ —á–∏—Ç–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç –≤ firewall
- [ ] –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é (–º–∏–Ω—É—è Cloudflare)

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# 1. –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
docker exec bartech-nginx openssl x509 -in /etc/letsencrypt/live/technobar.by/cert.pem -noout -subject -dates -text | grep -A 5 "Subject Alternative Name"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx
docker exec bartech-nginx nginx -t

# 4. –õ–æ–≥–∏ nginx
docker logs bartech-nginx --tail 50

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
openssl s_client -connect localhost:443 -servername testpage.technobar.by < /dev/null 2>/dev/null | openssl x509 -noout -subject -dates
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** `*.technobar.by` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã, –≤–∫–ª—é—á–∞—è `testpage.technobar.by`
2. **–ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–¥–æ–º–µ–Ω–∞
3. **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏ 526** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SSL —Ä–µ–∂–∏–º –≤ Cloudflare (–æ–±—ã—á–Ω–æ "Flexible")
4. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ Cloudflare –ø–æ–¥–æ–∂–¥–∏—Ç–µ **1-2 –º–∏–Ω—É—Ç—ã** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Cloudflare:
   - Cloudflare Dashboard ‚Üí **Analytics** ‚Üí **Logs**
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ 526

2. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Cloudflare:
   - –£–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω: `testpage.technobar.by`
   - –í—Ä–µ–º—è –æ—à–∏–±–∫–∏
   - –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ nginx

